(this["webpackJsonpnew-app"]=this["webpackJsonpnew-app"]||[]).push([[0],{18:function(e,t,n){},19:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n(13),o=n.n(a),c=n(3),i=n(4),r=n(6),l=n(5),u=(n(18),n(19),n(0)),d=function(){return Object(u.jsx)("div",{className:"app-logo",children:Object(u.jsx)("img",{className:"app-logo__img",src:"./img/logo.png",alt:"App logo"})})},g=function(){return Object(u.jsx)("header",{className:"app-header",children:Object(u.jsx)(d,{})})},b=(n(21),n(2)),j=n(12),h=(n(22),n(10)),f=n.n(h),m=(n(31),function(e){Object(r.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={value:e.props.value,isEmpty:!0},e.clickHandler=function(){var t=e.props,n=t.onSelect,s=t.row,a=t.column,o=t.value,c=t.isPlaying,i=e.state.isEmpty;c&&i&&(e.setState({value:o,isEmpty:!1}),n(s,a))},e}return Object(i.a)(n,[{key:"render",value:function(){return Object(u.jsx)("div",{className:"board-field",onClick:this.clickHandler,children:this.state.value})}}]),n}(s.Component)),O=(n(32),function(e){var t=e.message;return Object(u.jsx)("div",{className:"info-panel",children:t})}),p=(n(33),function(e){var t=e.onSelect;return Object(u.jsxs)("div",{className:"buttons-block",children:[Object(u.jsx)("button",{type:"button",className:"btn btn-outline-info btn-lg btn-block",onClick:function(){return t("Autoplay")},children:"Autoplay"}),Object(u.jsx)("button",{type:"button",className:"btn btn-outline-secondary btn-lg btn-block",onClick:function(){return t("Statistics")},children:"Statistics"}),Object(u.jsx)("button",{type:"button",className:"btn btn-outline-primary btn-lg btn-block",onClick:function(){return t("NewGame")},children:"New Game"})]})}),y=(n(34),n(7)),S=n.n(y),v=function(e){var t=e.onPlayerChange,n=e.playerState,a=e.onSoundChange,o=e.soundState,c=e.onMusicChange,i=e.musicState,r=e.onNightModeChange,l=e.nightModeState,d=Object(s.useState)(n),g=Object(b.a)(d,2),j=g[0],h=g[1],f=Object(s.useState)(l),m=Object(b.a)(f,2),O=m[0],p=m[1],y=Object(s.useState)(!1),v=Object(b.a)(y,2),x=v[0],N=v[1],w=Object(s.useState)(o),C=Object(b.a)(w,2),k=C[0],I=C[1],P=Object(s.useState)(i),M=Object(b.a)(P,2),_=M[0],L=M[1];return Object(u.jsxs)("div",{className:"toggles-block",children:[Object(u.jsxs)("label",{className:"toggles-block__toggle",children:[Object(u.jsx)("span",{children:"First player"}),Object(u.jsx)(S.a,{onChange:function(e){h(e),t()},checked:j,className:"react-switch",onColor:"#86d3ff",onHandleColor:"#2693e6",offColor:"#86d3ff",offHandleColor:"#2693e6",checkedIcon:Object(u.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",fontSize:18,fontWeight:"bold",color:"#ffffff",paddingRight:2},children:"O"})})]}),Object(u.jsxs)("label",{className:"toggles-block__toggle",children:[Object(u.jsx)("span",{children:"Night Mode"}),Object(u.jsx)(S.a,{onChange:function(e){p(e),r()},checked:O,className:"react-switch",onColor:"#86d3ff",onHandleColor:"#2693e6"})]}),Object(u.jsxs)("label",{className:"toggles-block__toggle",children:[Object(u.jsx)("span",{children:"Fullscreen"}),Object(u.jsx)(S.a,{onChange:function(e){var t;N(e),x?document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():(t=document.getElementById("root")).requestFullScreen?t.requestFullScreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()},checked:x,className:"react-switch",onColor:"#86d3ff",onHandleColor:"#2693e6"})]}),Object(u.jsxs)("label",{className:"toggles-block__toggle",children:[Object(u.jsx)("span",{children:"Sounds"}),Object(u.jsx)(S.a,{onChange:function(e){I(e),a()},checked:k,className:"react-switch",onColor:"#86d3ff",onHandleColor:"#2693e6"})]}),Object(u.jsxs)("label",{className:"toggles-block__toggle",children:[Object(u.jsx)("span",{children:"Music"}),Object(u.jsx)(S.a,{onChange:function(e){L(e),c()},checked:_,className:"react-switch",onColor:"#86d3ff",onHandleColor:"#2693e6"})]})]})},x=(n(36),function(e){var t=Object(b.a)(e.line,2),n=Object(b.a)(t[0],2),s=n[0],a=n[1],o=Object(b.a)(t[1],2),c=o[0],i=o[1],r=e.visibility?"winning-line":"winning-line d-none";return Object(u.jsx)("svg",{className:r,height:"300",width:"300",children:Object(u.jsx)("line",{className:"winning-line__line",x1:s,y1:a,x2:c,y2:i})})}),N=function(e){Object(r.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={board:JSON.parse(sessionStorage.getItem("board"))||[["","",""],["","",""],["","",""]],isPlaying:!0,winner:"",message:"Let's play!"},e.currentPlayer=sessionStorage.getItem("startingPlayer")||"X",e.startingPlayer=sessionStorage.getItem("startingPlayer")||"X",e.isNightMode="true"===sessionStorage.getItem("isNightMode"),e.soundIsOn="true"===sessionStorage.getItem("soundIsOn"),e.playMoveSound=!1,e.playEndGameSound=!1,e.musicIsOn=!1,e.idCounter=0,e.winningLines=[[[0,0],[0,0]],[[10,50],[290,50]],[[10,150],[290,150]],[[10,250],[290,250]],[[50,10],[50,290]],[[150,10],[150,290]],[[250,10],[250,290]],[[10,10],[290,290]],[[10,290],[290,10]]],e.winningLine=e.winningLines[0],e.saveSessionData=function(){sessionStorage.setItem("startingPlayer",e.startingPlayer),sessionStorage.setItem("isNightMode",e.isNightMode),sessionStorage.setItem("soundIsOn",e.soundIsOn),sessionStorage.setItem("board",JSON.stringify(e.state.board))},e.drawLine=function(t){e.winningLine=e.winningLines[t]},e.setInitialGameState=function(){e.setState({board:[["","",""],["","",""],["","",""]],isPlaying:!0,winner:"",message:"Let's play!"}),e.currentPlayer=e.startingPlayer},e.toggleCurrentPlayer=function(){e.currentPlayer="O"===e.currentPlayer?"X":"O"},e.toggleStartingPlayer=function(){e.startingPlayer="O"===e.startingPlayer?"X":"O",e.setInitialGameState()},e.toggleNightModeSwitch=function(){e.isNightMode=!e.isNightMode,document.getElementById("root").classList.toggle("night-mode")},e.toggleSoundSwitch=function(){e.soundIsOn=!e.soundIsOn},e.toggleMusicSwitch=function(){e.musicIsOn=!e.musicIsOn},e.toggleSound=function(t){e[t]=!0,setTimeout((function(){e[t]=!1}),100)},e.stopGame=function(t){var n="Player ".concat(t," won!");e.setState({isPlaying:!1,winner:t},(function(){e.setState({message:t?n:"Tie!"})})),e.drawLine(1),e.soundIsOn&&e.toggleSound("playEndGameSound")},e.makeMove=function(t,n){e.setState((function(s){var a=s.board,o=Object(j.a)(a);return o[t][n]=e.currentPlayer,{board:o}}),(function(){e.soundIsOn&&e.toggleSound("playMoveSound"),e.resultCheck(),e.toggleCurrentPlayer(),e.setState({message:"It's player ".concat(e.currentPlayer," turn.")})}))},e.resultCheck=function(){for(var t=e.state.board,n=0;n<3;n++)if(t[n][0]&&t[n][0]===t[n][1]&&t[n][1]===t[n][2]){var s=t[n][0];return e.stopGame(s),void e.drawLine(n+1)}for(var a=0;a<3;a++)if(t[0][a]&&t[0][a]===t[1][a]&&t[1][a]===t[2][a]){var o=t[0][a];return e.stopGame(o),void e.drawLine(a+4)}if(t[0][0]&&t[0][0]===t[1][1]&&t[1][1]===t[2][2]){var c=t[0][0];return e.stopGame(c),void e.drawLine(7)}if(t[0][2]&&t[0][2]===t[1][1]&&t[1][1]===t[2][0]){var i=t[0][2];return e.stopGame(i),void e.drawLine(8)}for(var r=0;r<3;r++)for(var l=0;l<3;l++)if(!t[r][l])return;e.stopGame(null),e.drawLine(0)},e.autoplay=function(){e.setState({board:[["","",""],["","",""],["","",""]],isPlaying:!0,winner:"",message:"Let's play!"},(function(){for(var t=[],n=0;n<3;n++)for(var s=0;s<3;s++)t.push([n,s]);!function n(){if(e.state.isPlaying){var s=Math.floor(Math.random()*(t.length+1)),a=t.splice(s-1,1),o=Object(b.a)(a,1)[0],c=Object(b.a)(o,2),i=c[0],r=c[1];e.setState((function(t){var n=t.board,s=Object(j.a)(n);return s[i][r]=e.currentPlayer,{board:s}}),(function(){e.soundIsOn&&e.toggleSound("playMoveSound"),e.resultCheck(),e.toggleCurrentPlayer(),e.setState({message:"It's player ".concat(e.currentPlayer," turn.")}),t.length&&setTimeout(n,1e3)}))}}()}))},e.onSelect=function(t,n){e.state.board[t][n]||e.makeMove(t,n)},e.settingsListener=function(t){switch(t){case"Autoplay":e.autoplay();break;case"Statistics":break;case"NewGame":e.setInitialGameState()}},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this;window.addEventListener("beforeunload",(function(){e.saveSessionData()})),this.isNightMode&&document.getElementById("root").classList.add("night-mode"),this.settingsListener();var t=this.state,n=t.board,s=t.isPlaying,a=n.map((function(t,n){return Object(u.jsx)("div",{className:"board-row",children:t.map((function(t,a){return Object(u.jsx)(m,{row:n,column:a,onSelect:e.onSelect,value:t,isPlaying:s},e.idCounter++)}))},e.idCounter++)}));return Object(u.jsxs)("div",{className:"game-board",children:[Object(u.jsxs)("section",{className:"game-field",children:[Object(u.jsx)(O,{message:this.state.message}),Object(u.jsx)(x,{line:this.winningLine,visibility:!this.state.isPlaying}),a]}),Object(u.jsxs)("section",{className:"game-settings",children:[Object(u.jsx)(v,{onPlayerChange:this.toggleStartingPlayer,playerState:"O"===this.startingPlayer,onSoundChange:this.toggleSoundSwitch,soundState:this.soundIsOn,onMusicChange:this.toggleMusicSwitch,musicState:this.musicIsOn,onNightModeChange:this.toggleNightModeSwitch,nightModeState:this.isNightMode}),Object(u.jsx)(p,{onSelect:this.settingsListener})]}),Object(u.jsx)(f.a,{src:"./sounds/move-sound.mp3",playing:this.playMoveSound}),Object(u.jsx)(f.a,{src:"./sounds/end-game-sound.mp3",playing:this.playEndGameSound}),Object(u.jsx)(f.a,{src:"./sounds/game-music.mp3",loop:!0,playing:this.musicIsOn})]})}}]),n}(s.Component),w=function(){return Object(u.jsx)("main",{className:"app-main",children:Object(u.jsx)(N,{})})},C=(n(37),n(38),function(){return Object(u.jsxs)("div",{className:"social-icons",children:[Object(u.jsx)("a",{href:"https://github.com/DenisKhatsuk",target:"_blank",rel:"noreferrer",children:Object(u.jsx)("i",{className:"fa fa-github fa-3x"})}),Object(u.jsx)("a",{href:"https://github.com/DenisKhatsuk",target:"_blank",rel:"noreferrer",children:Object(u.jsx)("i",{className:"fa fa-youtube fa-3x"})})]})}),k=(n(39),function(){return Object(u.jsx)("img",{src:"./img/rsschool-logo.png",alt:"RS School logo",className:"rsschool-logo"})}),I=function(){return Object(u.jsxs)("footer",{className:"app-footer",children:[Object(u.jsxs)("div",{className:"app-footer__details",children:[Object(u.jsx)("span",{className:"app-footer__year",children:"2021"}),Object(u.jsx)("div",{className:"app-footer__logo",children:Object(u.jsx)("a",{href:"https://rs.school/react/",target:"_blank",rel:"noreferrer",children:Object(u.jsx)(k,{})})})]}),Object(u.jsx)("div",{className:"app-footer__icons",children:Object(u.jsx)(C,{})})]})},P=(n(40),function(e){Object(r.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(u.jsxs)("div",{className:"react-game-app",children:[Object(u.jsx)(g,{}),Object(u.jsx)(w,{}),Object(u.jsx)(I,{})]})}}]),n}(s.Component));n(41);o.a.render(Object(u.jsx)(P,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.9f08c625.chunk.js.map
(this["webpackJsonpnew-app"]=this["webpackJsonpnew-app"]||[]).push([[0],Array(18).concat([function(e,t,s){},function(e,t,s){},,function(e,t,s){},function(e,t,s){},,,,,,,,,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){"use strict";s.r(t);var n=s(1),a=s(13),i=s.n(a),c=s(3),o=s(4),r=s(6),l=s(5),u=(s(18),s(19),s(0)),g=function(){return Object(u.jsx)("div",{className:"app-logo",children:Object(u.jsx)("img",{className:"app-logo__img",src:"./img/logo.png",alt:"App logo"})})},d=function(){return Object(u.jsx)("header",{className:"app-header",children:Object(u.jsx)(g,{})})},b=(s(21),s(2)),j=s(12),h=(s(22),s(10)),m=s.n(h),f=(s(31),function(e){Object(r.a)(s,e);var t=Object(l.a)(s);function s(){var e;Object(c.a)(this,s);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={value:e.props.value,isEmpty:!0},e.clickHandler=function(){var t=e.props,s=t.onSelect,n=t.row,a=t.column,i=t.value,c=t.isPlaying,o=e.state.isEmpty;c&&o&&(e.setState({value:i,isEmpty:!1}),s(n,a))},e}return Object(o.a)(s,[{key:"render",value:function(){return Object(u.jsx)("div",{className:"board-field",onClick:this.clickHandler,children:this.state.value})}}]),s}(n.Component)),O=(s(32),function(e){var t=e.message;return Object(u.jsx)("div",{className:"info-panel",children:t})}),p=(s(33),function(e){var t=e.onSelect;return Object(u.jsxs)("div",{className:"buttons-block",children:[Object(u.jsx)("button",{type:"button",className:"btn btn-outline-info btn-lg btn-block",onClick:function(){return t("Autoplay")},children:"Autoplay"}),Object(u.jsx)("button",{type:"button",className:"btn btn-outline-secondary btn-lg btn-block",onClick:function(){return t("Statistics")},children:"Statistics"}),Object(u.jsx)("button",{type:"button",className:"btn btn-outline-primary btn-lg btn-block",onClick:function(){return t("NewGame")},children:"New Game"})]})}),S=(s(34),s(7)),y=s.n(S),v=function(e){var t=e.onPlayerChange,s=e.playerState,a=e.onSoundChange,i=e.soundState,c=e.onMusicChange,o=e.musicState,r=e.onNightModeChange,l=e.nightModeState,g=Object(n.useState)(s),d=Object(b.a)(g,2),j=d[0],h=d[1],m=Object(n.useState)(l),f=Object(b.a)(m,2),O=f[0],p=f[1],S=Object(n.useState)(!1),v=Object(b.a)(S,2),x=v[0],N=v[1],w=Object(n.useState)(i),C=Object(b.a)(w,2),I=C[0],k=C[1],_=Object(n.useState)(o),P=Object(b.a)(_,2),M=P[0],L=P[1];return Object(u.jsxs)("div",{className:"toggles-block",children:[Object(u.jsxs)("label",{className:"toggles-block__toggle",children:[Object(u.jsx)("span",{children:"First player"}),Object(u.jsx)(y.a,{onChange:function(e){h(e),t()},checked:j,className:"react-switch",onColor:"#86d3ff",onHandleColor:"#2693e6",offColor:"#86d3ff",offHandleColor:"#2693e6",checkedIcon:Object(u.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",fontSize:18,fontWeight:"bold",color:"#ffffff",paddingRight:2},children:"O"})})]}),Object(u.jsxs)("label",{className:"toggles-block__toggle",children:[Object(u.jsx)("span",{children:"Night Mode"}),Object(u.jsx)(y.a,{onChange:function(e){p(e),r()},checked:O,className:"react-switch",onColor:"#86d3ff",onHandleColor:"#2693e6"})]}),Object(u.jsxs)("label",{className:"toggles-block__toggle",children:[Object(u.jsx)("span",{children:"Fullscreen"}),Object(u.jsx)(y.a,{onChange:function(e){var t;N(e),x?document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():(t=document.getElementById("root")).requestFullScreen?t.requestFullScreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()},checked:x,className:"react-switch",onColor:"#86d3ff",onHandleColor:"#2693e6"})]}),Object(u.jsxs)("label",{className:"toggles-block__toggle",children:[Object(u.jsx)("span",{children:"Sounds"}),Object(u.jsx)(y.a,{onChange:function(e){k(e),a()},checked:I,className:"react-switch",onColor:"#86d3ff",onHandleColor:"#2693e6"})]}),Object(u.jsxs)("label",{className:"toggles-block__toggle",children:[Object(u.jsx)("span",{children:"Music"}),Object(u.jsx)(y.a,{onChange:function(e){L(e),c()},checked:M,className:"react-switch",onColor:"#86d3ff",onHandleColor:"#2693e6"})]})]})},x=(s(36),function(e){var t=Object(b.a)(e.line,2),s=Object(b.a)(t[0],2),n=s[0],a=s[1],i=Object(b.a)(t[1],2),c=i[0],o=i[1],r=e.visibility?"winning-line":"winning-line d-none";return Object(u.jsx)("svg",{className:r,height:"300",width:"300",children:Object(u.jsx)("line",{className:"winning-line__line",x1:n,y1:a,x2:c,y2:o})})}),N=(s(37),function(e){var t=e.statistics,s=e.visibility,n=e.onClose,a=s?"statistics":"statistics statistics_hidden",i=0,c=0,o=0;t.forEach((function(e){switch(e){case"X":i+=1;break;case"O":c+=1;break;default:o+=1}}));var r=Object(u.jsxs)("ul",{className:"statistics__results",children:[Object(u.jsxs)("li",{className:"statistics__results-item",children:["X player wins: ",i]}),Object(u.jsxs)("li",{className:"statistics__results-item",children:["O player wins: ",c]}),Object(u.jsxs)("li",{className:"statistics__results-item",children:["Ties: ",o]})]});return Object(u.jsxs)("div",{className:a,children:[Object(u.jsx)("i",{className:"fa fa-times statistics__close",title:"Close Statistics",onClick:function(){return n()}}),Object(u.jsx)("h1",{className:"statistics__title",children:"Game results during last 10 plays"}),r]})}),w=function(e){Object(r.a)(s,e);var t=Object(l.a)(s);function s(){var e;Object(c.a)(this,s);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={board:JSON.parse(sessionStorage.getItem("board"))||[["","",""],["","",""],["","",""]],isPlaying:!0,winner:"",message:sessionStorage.getItem("message")||"Let's play!",statisticsIsVisible:"true"===sessionStorage.getItem("statisticsIsVisible")},e.statistics=JSON.parse(localStorage.getItem("statistics"))||[],e.currentPlayer=sessionStorage.getItem("startingPlayer")||"X",e.startingPlayer=sessionStorage.getItem("startingPlayer")||"X",e.isNightMode="true"===sessionStorage.getItem("isNightMode"),e.soundIsOn="true"===sessionStorage.getItem("soundIsOn"),e.playMoveSound=!1,e.playEndGameSound=!1,e.musicIsOn=!1,e.idCounter=0,e.winningLines=[[[0,0],[0,0]],[[10,50],[290,50]],[[10,150],[290,150]],[[10,250],[290,250]],[[50,10],[50,290]],[[150,10],[150,290]],[[250,10],[250,290]],[[10,10],[290,290]],[[10,290],[290,10]]],e.winningLine=e.winningLines[0],e.saveSessionData=function(){sessionStorage.setItem("message",e.state.message),sessionStorage.setItem("statisticsIsVisible",e.state.statisticsIsVisible),sessionStorage.setItem("startingPlayer",e.startingPlayer),sessionStorage.setItem("isNightMode",e.isNightMode),sessionStorage.setItem("soundIsOn",e.soundIsOn),sessionStorage.setItem("board",JSON.stringify(e.state.board))},e.drawLine=function(t){e.winningLine=e.winningLines[t]},e.setInitialGameState=function(){e.setState({board:[["","",""],["","",""],["","",""]],isPlaying:!0,winner:"",message:"Let's play!"}),e.currentPlayer=e.startingPlayer},e.toggleCurrentPlayer=function(){e.currentPlayer="O"===e.currentPlayer?"X":"O"},e.toggleStartingPlayer=function(){e.startingPlayer="O"===e.startingPlayer?"X":"O",e.setInitialGameState()},e.toggleNightModeSwitch=function(){e.isNightMode=!e.isNightMode,document.getElementById("root").classList.toggle("night-mode")},e.toggleSoundSwitch=function(){e.soundIsOn=!e.soundIsOn},e.toggleMusicSwitch=function(){e.musicIsOn=!e.musicIsOn},e.toggleSound=function(t){e[t]=!0,setTimeout((function(){e[t]=!1}),100)},e.updateStatistics=function(){var t=e.state.winner||"Tie";e.statistics.push(t),e.statistics.length>10&&e.statistics.splice(0,1)},e.toggleStatistics=function(){e.setState({statisticsIsVisible:!e.state.statisticsIsVisible})},e.stopGame=function(t){var s="Player ".concat(t," won!");e.setState({isPlaying:!1,winner:t},(function(){e.setState({message:t?s:"Tie!"}),e.updateStatistics(),localStorage.setItem("statistics",JSON.stringify(e.statistics))})),e.drawLine(1),e.soundIsOn&&e.toggleSound("playEndGameSound")},e.makeMove=function(t,s){e.setState((function(n){var a=n.board,i=Object(j.a)(a);return i[t][s]=e.currentPlayer,{board:i}}),(function(){e.soundIsOn&&e.toggleSound("playMoveSound"),e.resultCheck(),e.toggleCurrentPlayer(),e.setState({message:"It's player ".concat(e.currentPlayer," turn.")})}))},e.resultCheck=function(){for(var t=e.state.board,s=0;s<3;s++)if(t[s][0]&&t[s][0]===t[s][1]&&t[s][1]===t[s][2]){var n=t[s][0];return e.stopGame(n),void e.drawLine(s+1)}for(var a=0;a<3;a++)if(t[0][a]&&t[0][a]===t[1][a]&&t[1][a]===t[2][a]){var i=t[0][a];return e.stopGame(i),void e.drawLine(a+4)}if(t[0][0]&&t[0][0]===t[1][1]&&t[1][1]===t[2][2]){var c=t[0][0];return e.stopGame(c),void e.drawLine(7)}if(t[0][2]&&t[0][2]===t[1][1]&&t[1][1]===t[2][0]){var o=t[0][2];return e.stopGame(o),void e.drawLine(8)}for(var r=0;r<3;r++)for(var l=0;l<3;l++)if(!t[r][l])return;e.stopGame(null),e.drawLine(0)},e.autoplay=function(){e.setState({board:[["","",""],["","",""],["","",""]],isPlaying:!0,winner:"",message:"Let's play!"},(function(){for(var t=[],s=0;s<3;s++)for(var n=0;n<3;n++)t.push([s,n]);!function s(){if(e.state.isPlaying){var n=Math.floor(Math.random()*(t.length+1)),a=t.splice(n-1,1),i=Object(b.a)(a,1)[0],c=Object(b.a)(i,2),o=c[0],r=c[1];e.setState((function(t){var s=t.board,n=Object(j.a)(s);return n[o][r]=e.currentPlayer,{board:n}}),(function(){e.soundIsOn&&e.toggleSound("playMoveSound"),e.resultCheck(),e.toggleCurrentPlayer(),e.setState({message:"It's player ".concat(e.currentPlayer," turn.")}),t.length&&setTimeout(s,1e3)}))}}()}))},e.onSelect=function(t,s){e.state.board[t][s]||e.makeMove(t,s)},e.settingsListener=function(t){switch(t){case"Autoplay":e.autoplay();break;case"Statistics":e.toggleStatistics();break;case"NewGame":e.setInitialGameState()}},e}return Object(o.a)(s,[{key:"render",value:function(){var e=this;window.addEventListener("beforeunload",(function(){e.saveSessionData()})),this.isNightMode&&document.getElementById("root").classList.add("night-mode"),this.settingsListener();var t=this.state,s=t.board,n=t.isPlaying,a=s.map((function(t,s){return Object(u.jsx)("div",{className:"board-row",children:t.map((function(t,a){return Object(u.jsx)(f,{row:s,column:a,onSelect:e.onSelect,value:t,isPlaying:n},e.idCounter++)}))},e.idCounter++)}));return Object(u.jsxs)("div",{className:"game-board",children:[Object(u.jsxs)("section",{className:"game-field",children:[Object(u.jsx)(O,{message:this.state.message}),Object(u.jsx)(x,{line:this.winningLine,visibility:!this.state.isPlaying}),a,Object(u.jsx)(N,{statistics:this.statistics,visibility:this.state.statisticsIsVisible,onClose:this.toggleStatistics})]}),Object(u.jsxs)("section",{className:"game-settings",children:[Object(u.jsx)(v,{onPlayerChange:this.toggleStartingPlayer,playerState:"O"===this.startingPlayer,onSoundChange:this.toggleSoundSwitch,soundState:this.soundIsOn,onMusicChange:this.toggleMusicSwitch,musicState:this.musicIsOn,onNightModeChange:this.toggleNightModeSwitch,nightModeState:this.isNightMode}),Object(u.jsx)(p,{onSelect:this.settingsListener})]}),Object(u.jsx)(m.a,{src:"./sounds/move-sound.mp3",playing:this.playMoveSound}),Object(u.jsx)(m.a,{src:"./sounds/end-game-sound.mp3",playing:this.playEndGameSound}),Object(u.jsx)(m.a,{src:"./sounds/game-music.mp3",loop:!0,playing:this.musicIsOn})]})}}]),s}(n.Component),C=function(){return Object(u.jsx)("main",{className:"app-main",children:Object(u.jsx)(w,{})})},I=(s(38),s(39),function(){return Object(u.jsxs)("div",{className:"social-icons",children:[Object(u.jsx)("a",{href:"https://github.com/DenisKhatsuk",target:"_blank",rel:"noreferrer",children:Object(u.jsx)("i",{className:"fa fa-github fa-3x"})}),Object(u.jsx)("a",{href:"https://github.com/DenisKhatsuk",target:"_blank",rel:"noreferrer",children:Object(u.jsx)("i",{className:"fa fa-youtube fa-3x"})})]})}),k=(s(40),function(){return Object(u.jsx)("img",{src:"./img/rsschool-logo.png",alt:"RS School logo",className:"rsschool-logo"})}),_=function(){return Object(u.jsxs)("footer",{className:"app-footer",children:[Object(u.jsxs)("div",{className:"app-footer__details",children:[Object(u.jsx)("span",{className:"app-footer__year",children:"2021"}),Object(u.jsx)("div",{className:"app-footer__logo",children:Object(u.jsx)("a",{href:"https://rs.school/react/",target:"_blank",rel:"noreferrer",children:Object(u.jsx)(k,{})})})]}),Object(u.jsx)("div",{className:"app-footer__icons",children:Object(u.jsx)(I,{})})]})},P=(s(41),function(e){Object(r.a)(s,e);var t=Object(l.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){return Object(u.jsxs)("div",{className:"react-game-app",children:[Object(u.jsx)(d,{}),Object(u.jsx)(C,{}),Object(u.jsx)(_,{})]})}}]),s}(n.Component));s(42);i.a.render(Object(u.jsx)(P,{}),document.getElementById("root"))}]),[[43,1,2]]]);
//# sourceMappingURL=main.66b39239.chunk.js.map